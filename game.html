<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  <title>ëŠ˜ë´„í•™êµ: ì•„ì´ë“¤ì˜ ë´„ì„ ì°¾ì•„ì„œ</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Sunflower:wght@300;500;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    :root {
      --spring-start: #fce7f3; --spring-mid: #fbcfe8; --spring-end: #f9a8d4;
      --primary-text: #831843; --secondary-text: #9f1239; --highlight-color: #ec4899;
    }
    
    body {
      font-family: 'Sunflower', sans-serif; /* ì¬í”Œë¼ì›Œ í°íŠ¸ ì ìš© */
      font-weight: 500;
      background: linear-gradient(135deg, var(--spring-start), var(--spring-mid), var(--spring-end));
      min-height: 100vh;
      transition: background 1.5s ease;
    }
    
    body.true-ending-active {
      --spring-start: #fff7ed; --spring-mid: #fed7aa; --spring-end: #fdba74;
      --highlight-color: #f59e0b;
      background: linear-gradient(135deg, #fff7ed, #fed7aa, #fdba74);
    }
    
    .sparkle {
      position: absolute; width: 8px; height: 8px; background: var(--highlight-color);
      border-radius: 50%; pointer-events: none; animation: sparkle-float 1s forwards;
      box-shadow: 0 0 10px var(--highlight-color);
    }
    @keyframes sparkle-float {
      0% { transform: scale(0) translate(0, 0); opacity: 1; }
      100% { transform: scale(2) translate(var(--tx), var(--ty)); opacity: 0; }
    }
    
    .cherry-blossom {
      position: fixed; pointer-events: none; z-index: 9999;
      animation: fall linear forwards; opacity: 0.8;
    }
    @keyframes fall { to { transform: translateY(100vh) rotate(360deg); opacity: 0; } }
    
    .stage { opacity: 0; transform: translateY(20px); transition: all 0.6s ease; }
    .stage.visible { opacity: 1; transform: translateY(0); }
    .stage.hidden { display: none; }
    
    .stage-locked::after {
      content: 'ğŸ”’'; position: absolute; top: 50%; left: 50%;
      transform: translate(-50%, -50%); font-size: 4rem; opacity: 0.3;
      animation: lock-pulse 2s infinite; color: var(--highlight-color);
    }
    @keyframes lock-pulse { 0%, 100% { transform: translate(-50%, -50%) scale(1); } 50% { transform: translate(-50%, -50%) scale(1.1); } }
    
    .game-button {
      background: var(--highlight-color); color: white; padding: 1rem 2rem;
      border-radius: 9999px; font-weight: bold; font-size: 1.125rem;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2); transition: all 0.3s ease;
      border: none; cursor: pointer;
    }
    .game-button:hover { transform: translateY(-3px); box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3); }
    .game-button:active { transform: translateY(-1px); }
    
    .input-field {
      width: 100%; padding: 0.75rem 1rem; border: 2px solid #e5e7eb;
      border-radius: 0.75rem; transition: all 0.3s ease; font-size: 1rem; font-family: 'Sunflower', sans-serif;
    }
    .input-field:focus { outline: none; border-color: var(--highlight-color); box-shadow: 0 0 0 3px rgba(236, 72, 153, 0.1); }
    
    .custom-checkbox { width: 1.5rem; height: 1.5rem; border: 2px solid #d1d5db; border-radius: 0.375rem; cursor: pointer; transition: all 0.3s ease; }
    .custom-checkbox:checked { background-color: var(--highlight-color); border-color: var(--highlight-color); }
    
    .choice-button {
      padding: 1.5rem; border: 3px solid #e5e7eb; border-radius: 1rem;
      cursor: pointer; transition: all 0.3s ease; background: white;
    }
    .choice-button:hover { border-color: var(--highlight-color); transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1); }
    .choice-button.selected { border-color: var(--highlight-color); background: linear-gradient(135deg, rgba(236, 72, 153, 0.1), rgba(236, 72, 153, 0.05)); }
    
    .modal-overlay { background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); }
    
    ::-webkit-scrollbar { width: 8px; height: 8px; }
    ::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.1); border-radius: 10px; }
    ::-webkit-scrollbar-thumb { background: var(--highlight-color); border-radius: 10px; }
    
    .scrambled { filter: blur(3px); user-select: none; transition: filter 0.5s ease; }
    .timetable-select { width: 100%; padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-size: 0.875rem; transition: all 0.3s ease; background: white; font-family: 'Sunflower', sans-serif; }
    .timetable-select:focus { outline: none; border-color: var(--highlight-color); }
    .timetable-select.correct { border-color: #10b981; background: #d1fae5; }
    
    .growth-indicator { width: 100%; height: 60px; background: white; border-radius: 30px; padding: 8px; box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.1); }
    .growth-bar {
      height: 100%; background: linear-gradient(90deg, #ec4899, #f59e0b);
      border-radius: 22px; transition: width 0.8s ease; display: flex;
      align-items: center; justify-content: flex-end; padding-right: 1rem; font-size: 1.5rem;
    }
    
    @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
    .fade-in { animation: fadeIn 0.6s ease forwards; }
    
    @keyframes heartbeat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
    .heartbeat { animation: heartbeat 1.5s ease infinite; }
    
    .message-box {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.7));
      border-left: 4px solid var(--highlight-color); padding: 1rem 1.5rem;
      border-radius: 0.75rem; margin: 1rem 0; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>
<body>
  <audio id="bgMusic" loop src="https://cdn.pixabay.com/download/audio/2022/11/17/audio_855845ce37.mp3?filename=a-small-miracle-120390.mp3"></audio>

  <!-- í”„ë¡¤ë¡œê·¸, ë©”ì¸ í¼, ì—”ë”© ëª¨ë‹¬ë“¤... (HTML êµ¬ì¡°ëŠ” ì´ì „ê³¼ ë™ì¼) -->
  <div id="prologueScreen" class="fixed inset-0 z-50 flex items-center justify-center p-4"><div class="bg-white/90 backdrop-blur-lg w-full max-w-2xl rounded-3xl shadow-2xl p-8 md:p-12 text-center fade-in"><div class="text-7xl mb-6 animate-bounce">ğŸŒ¸</div><h1 class="text-4xl md:text-5xl font-bold mb-4" style="color: var(--primary-text);">ëŠ˜ë´„í•™êµ: ì•„ì´ë“¤ì˜ ë´„ì„ ì°¾ì•„ì„œ</h1><div class="text-lg text-gray-700 leading-relaxed mb-8 space-y-3"><p class="italic">"ëª¨ë“  ì•„ì´ì—ê²ŒëŠ” ìì‹ ë§Œì˜ 'ë´„'ì´ ì°¾ì•„ì˜¬ ê¶Œë¦¬ê°€ ìˆìŠµë‹ˆë‹¤."</p><p>ì´ê²ƒì€ í‰ë²”í•œ ì‹ ì²­ì„œê°€ ì•„ë‹™ë‹ˆë‹¤.<br>í•œ ì•„ì´ì˜ ì†Œì¤‘í•œ ì—¬ì •ì„ ì™„ì„±í•˜ëŠ”<br>íŠ¹ë³„í•œ ì´ì•¼ê¸°ì…ë‹ˆë‹¤.</p></div><button id="startJourneyBtn" class="game-button">ì—¬ì • ì‹œì‘í•˜ê¸° âœ¨</button></div></div>
  <div id="mainForm" class="hidden container mx-auto max-w-4xl p-4 py-8"><div class="growth-indicator mb-8"><div id="growthBar" class="growth-bar" style="width: 0%;"><span id="growthEmoji">ğŸŒ±</span></div></div><div class="bg-white/90 backdrop-blur-lg rounded-3xl shadow-2xl p-6 md:p-10"><div class="text-center mb-8"><h1 class="text-3xl md:text-4xl font-bold mb-3" style="color: var(--primary-text);">ëŠ˜ë´„í•™êµ ì…í•™ ì—¬ì •</h1><p class="text-gray-600 text-lg">ì•„ì´ì˜ ë´„ì„ í•¨ê»˜ ì¤€ë¹„í•´ì£¼ì„¸ìš”</p></div><form id="applicationForm" class="space-y-8" onsubmit="return false;"><section id="stage1" class="stage visible space-y-4 p-6 rounded-2xl bg-gradient-to-br from-pink-50 to-purple-50 shadow-lg"><div class="flex items-start gap-4"><div id="privacyLock" class="text-5xl cursor-pointer transition-transform hover:scale-110 hover:rotate-12" title="í´ë¦­í•˜ì—¬ ì•½ì† í™•ì¸í•˜ê¸°">ğŸ”’</div><div class="flex-1"><h2 class="text-2xl font-bold mb-3" style="color: var(--primary-text);">ì œ 1ì¥: ì•½ì†ì˜ ì”¨ì•—</h2><div class="message-box text-sm text-gray-600 mb-4">"ì•„ì´ë¥¼ ì§€í‚¤ê² ë‹¤ëŠ” ì²« ë²ˆì§¸ ì•½ì†.<br>ì‹ ë¢°ëŠ” ëª¨ë“  ê´€ê³„ì˜ ì‹œì‘ì…ë‹ˆë‹¤."</div><div id="privacyNotice" class="bg-white p-4 rounded-lg mb-4 text-sm leading-relaxed scrambled">ëŠ˜ë´„í•™êµëŠ” ì•½ì†í•©ë‹ˆë‹¤. ìš°ë¦¬ê°€ ë§¡ì€ ëª¨ë“  ì•„ì´ë¥¼, ìš°ë¦¬ ì•„ì´ì²˜ëŸ¼ ì†Œì¤‘í•˜ê²Œ ëŒë³´ê² ìŠµë‹ˆë‹¤. ì´ ì•½ì†ì€ ë‹¨ìˆœí•œ ë§ì´ ì•„ë‹™ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì•„ì´ì˜ ê°œì¸ì •ë³´ë¥¼ ì² ì €íˆ ë³´í˜¸í•˜ê³ , ì•„ì´ì˜ ì•ˆì „ì„ ìµœìš°ì„ ìœ¼ë¡œ ìƒê°í•˜ë©°, ë¶€ëª¨ë‹˜ê³¼ì˜ ì‹ ë¢°ë¥¼ ì§€ì¼œë‚˜ê°€ê² ìŠµë‹ˆë‹¤. ì´ê²ƒì´ ëŠ˜ë´„í•™êµì˜ ì²« ë²ˆì§¸ ì•½ì†ì…ë‹ˆë‹¤.</div><label class="flex items-start gap-3 cursor-pointer group"><input type="checkbox" id="privacyAgree" class="custom-checkbox mt-1"><span class="text-sm font-semibold text-gray-700 group-hover:text-pink-600 transition">í•™êµì˜ ì•½ì†ì„ ì´í•´í•˜ê³  ë¯¿ìŠµë‹ˆë‹¤ ğŸ’–</span></label></div></div></section><section id="stage2" class="stage hidden stage-locked space-y-4 p-6 rounded-2xl bg-gradient-to-br from-blue-50 to-indigo-50 shadow-lg"><h2 class="text-2xl font-bold mb-3" style="color: var(--primary-text);">ì œ 2ì¥: ê°ˆë¦¼ê¸¸ì˜ ì„ íƒ</h2><div class="message-box text-sm text-gray-600 mb-4">"ëª¨ë“  ì•„ì´ëŠ” ê°ìì˜ ì´ì•¼ê¸°ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.<br>ìƒˆë¡œìš´ ì‹œì‘ì´ë“ , ì´ì–´ì§€ëŠ” ì—¬ì •ì´ë“ , ëª¨ë‘ ì†Œì¤‘í•©ë‹ˆë‹¤."</div><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><button type="button" class="choice-button" data-path="new"><div class="text-5xl mb-3">ğŸŒ±</div><div class="text-xl font-bold mb-2">ìƒˆì‹¹ì˜ ê¸¸</div><div class="text-sm text-gray-600">ì²˜ìŒ ì‹œì‘í•˜ëŠ” ëŠ˜ë´„í•™êµ<br>ì„¤ë ˆëŠ” ì²«ê±¸ìŒ</div></button><button type="button" class="choice-button" data-path="existing"><div class="text-5xl mb-3">ğŸŒ³</div><div class="text-xl font-bold mb-2">ì„±ì¥ì˜ ê¸¸</div><div class="text-sm text-gray-600">í•¨ê»˜í•œ ì‹œê°„ì„ ì´ì–´ê°€ëŠ”<br>ì†Œì¤‘í•œ ë°œê±¸ìŒ</div></button></div></section><section id="stage3" class="stage hidden stage-locked space-y-6 p-6 rounded-2xl bg-gradient-to-br from-yellow-50 to-orange-50 shadow-lg"><h2 class="text-2xl font-bold mb-3" style="color: var(--primary-text);">ì œ 3ì¥: ì•„ì´ì˜ ì´ì•¼ê¸°</h2><div class="message-box text-sm text-gray-600 mb-4">"ì•„ì´ì˜ ì´ë¦„ì„ ë¶€ë¥´ëŠ” ê²ƒ, ì•„ì´ì˜ ìƒì¼ì„ ê¸°ì–µí•˜ëŠ” ê²ƒ.<br>ì´ ëª¨ë“  ê²ƒì´ ì‚¬ë‘ì˜ í‘œí˜„ì…ë‹ˆë‹¤."</div><div class="space-y-6"><div class="bg-white p-6 rounded-xl shadow-sm space-y-4"><h3 class="font-bold text-lg text-gray-800 mb-4">ì•„ì´ì˜ ê¸°ë³¸ ì •ë³´</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-semibold text-gray-700 mb-2">ì˜ì›…ì˜ ì´ë¦„ âœ¨</label><input type="text" id="studentName" class="input-field" placeholder="ì•„ì´ì˜ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"><p class="text-xs text-gray-500 mt-1">ì´ë¦„ì„ ë¶€ë¥´ëŠ” ìˆœê°„, ì´ì•¼ê¸°ê°€ ì‹œì‘ë©ë‹ˆë‹¤</p></div><div><label class="block text-sm font-semibold text-gray-700 mb-2">íƒ„ìƒì˜ ìˆœê°„ ğŸ‚</label><input type="date" id="birthDate" class="input-field"><p class="text-xs text-gray-500 mt-1">ì•„ì´ê°€ ì„¸ìƒì— ì˜¨ íŠ¹ë³„í•œ ë‚ </p></div></div></div><div class="bg-white p-6 rounded-xl shadow-sm space-y-4"><h3 class="font-bold text-lg text-gray-800 mb-4">ìˆ˜í˜¸ìì˜ ì •ë³´</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-semibold text-gray-700 mb-2">ìˆ˜í˜¸ìì˜ ì´ë¦„ ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</label><input type="text" id="parentName" class="input-field" placeholder="ë‹¹ì‹ ì˜ ì´ë¦„ì„ ì•Œë ¤ì£¼ì„¸ìš”"><p class="text-xs text-gray-500 mt-1">ì•„ì´ ê³ì—ì„œ ëŠ˜ í•¨ê»˜í•˜ëŠ” ì´ë¦„</p></div><div><label class="block text-sm font-semibold text-gray-700 mb-2">ì—°ê²°ì˜ ë§ˆë²• ğŸ“</label><input type="tel" id="parentContact" class="input-field" placeholder="010-0000-0000" maxlength="13"><p class="text-xs text-pink-600 mt-1 font-medium">ğŸ’¡ íŒíŠ¸: ì²œì‚¬ë¥¼ ëœ»í•˜ëŠ” ìˆ«ì '1004'ë¥¼ ê¸°ì–µí•˜ì‹œë‚˜ìš”?</p></div></div></div></div></section><section id="stage4" class="stage hidden stage-locked space-y-6 p-6 rounded-2xl bg-gradient-to-br from-green-50 to-teal-50 shadow-lg"><h2 class="text-2xl font-bold mb-3" style="color: var(--primary-text);">ì œ 4ì¥: ì‹œê°„ì˜ ì •ì›</h2><div class="message-box text-sm text-gray-600 mb-4">"ì•„ì´ì˜ í•˜ë£¨ëŠ” 24ì‹œê°„ì…ë‹ˆë‹¤.<br>ê·¸ ì¤‘ ë°©ê³¼ í›„ ì‹œê°„ì„ ì–´ë–»ê²Œ ì±„ìš¸ì§€ëŠ” ë¶€ëª¨ë‹˜ì˜ ì§€í˜œê°€ í•„ìš”í•©ë‹ˆë‹¤."</div><div class="bg-purple-100 p-4 rounded-xl text-center mb-4"><p class="text-sm font-semibold" style="color: var(--secondary-text);">"ì›”ìš”ì¼ì—” <span style="color: var(--highlight-color);">ëŒë³´ëŠ” ë§ˆìŒ</span>, ìˆ˜ìš”ì¼ì—” <span style="color: var(--highlight-color);">ë§ì¶¤í˜• ì§€í˜œ</span>, ê¸ˆìš”ì¼ì—” <span style="color: var(--highlight-color);">ìƒˆë¡œìš´ êµìœ¡</span>ì˜ ì”¨ì•—ì„ ì‹¬ìœ¼ì„¸ìš”."</p></div><div class="bg-white p-6 rounded-xl shadow-sm overflow-x-auto"><table class="w-full text-center text-sm" id="timetable"><thead><tr class="border-b-2 border-gray-300"><th class="p-2 font-bold text-gray-700">êµì‹œ</th><th class="p-2 font-bold text-gray-700">ì›”</th><th class="p-2 font-bold text-gray-700">í™”</th><th class="p-2 font-bold text-gray-700">ìˆ˜</th><th class="p-2 font-bold text-gray-700">ëª©</th><th class="p-2 font-bold text-gray-700">ê¸ˆ</th></tr></thead><tbody><tr><td class="p-2 font-semibold text-gray-600">1êµì‹œ</td><td class="p-2"><select class="timetable-select" data-day="ì›”" data-period="1"><option value="">ì„ íƒ</option><option value="ì„ íƒí˜• ëŒë´„">ì„ íƒí˜• ëŒë´„</option><option value="ë§ì¶¤í˜•">ë§ì¶¤í˜•</option><option value="ì„ íƒí˜• êµìœ¡">ì„ íƒí˜• êµìœ¡(ì˜ˆì •)</option></select></td><td class="p-2"><select class="timetable-select" data-day="í™”" data-period="1"><option value="">ì„ íƒ</option><option value="ì„ íƒí˜• ëŒë´„">ì„ íƒí˜• ëŒë´„</option><option value="ë§ì¶¤í˜•">ë§ì¶¤í˜•</option><option value="ì„ íƒí˜• êµìœ¡">ì„ íƒí˜• êµìœ¡(ì˜ˆì •)</option></select></td><td class="p-2"><select class="timetable-select" data-day="ìˆ˜" data-period="1"><option value="">ì„ íƒ</option><option value="ì„ íƒí˜• ëŒë´„">ì„ íƒí˜• ëŒë´„</option><option value="ë§ì¶¤í˜•">ë§ì¶¤í˜•</option><option value="ì„ íƒí˜• êµìœ¡">ì„ íƒí˜• êµìœ¡(ì˜ˆì •)</option></select></td><td class="p-2"><select class="timetable-select" data-day="ëª©" data-period="1"><option value="">ì„ íƒ</option><option value="ì„ íƒí˜• ëŒë´„">ì„ íƒí˜• ëŒë´„</option><option value="ë§ì¶¤í˜•">ë§ì¶¤í˜•</option><option value="ì„ íƒí˜• êµìœ¡">ì„ íƒí˜• êµìœ¡(ì˜ˆì •)</option></select></td><td class="p-2"><select class="timetable-select" data-day="ê¸ˆ" data-period="1"><option value="">ì„ íƒ</option><option value="ì„ íƒí˜• ëŒë´„">ì„ íƒí˜• ëŒë´„</option><option value="ë§ì¶¤í˜•">ë§ì¶¤í˜•</option><option value="ì„ íƒí˜• êµìœ¡">ì„ íƒí˜• êµìœ¡(ì˜ˆì •)</option></select></td></tr><tr class="bg-gray-50"><td class="p-2 font-semibold text-gray-600">2êµì‹œ</td><td class="p-2"><select class="timetable-select" data-day="ì›”" data-period="2"><option value="">ì„ íƒ</option><option value="ì„ íƒí˜• ëŒë´„">ì„ íƒí˜• ëŒë´„</option><option value="ë§ì¶¤í˜•">ë§ì¶¤í˜•</option><option value="ì„ íƒí˜• êµìœ¡">ì„ íƒí˜• êµìœ¡(ì˜ˆì •)</option></select></td><td class="p-2"><select class="timetable-select" data-day="í™”" data-period="2"><option value="">ì„ íƒ</option><option value="ì„ íƒí˜• ëŒë´„">ì„ íƒí˜• ëŒë´„</option><option value="ë§ì¶¤í˜•">ë§ì¶¤í˜•</option><option value="ì„ íƒí˜• êµìœ¡">ì„ íƒí˜• êµìœ¡(ì˜ˆì •)</option></select></td><td class="p-2"><select class="timetable-select" data-day="ìˆ˜" data-period="2"><option value="">ì„ íƒ</option><option value="ì„ íƒí˜• ëŒë´„">ì„ íƒí˜• ëŒë´„</option><option value="ë§ì¶¤í˜•">ë§ì¶¤í˜•</option><option value="ì„ íƒí˜• êµìœ¡">ì„ íƒí˜• êµìœ¡(ì˜ˆì •)</option></select></td><td class="p-2"><select class="timetable-select" data-day="ëª©" data-period="2"><option value="">ì„ íƒ</option><option value="ì„ íƒí˜• ëŒë´„">ì„ íƒí˜• ëŒë´„</option><option value="ë§ì¶¤í˜•">ë§ì¶¤í˜•</option><option value="ì„ íƒí˜• êµìœ¡">ì„ íƒí˜• êµìœ¡(ì˜ˆì •)</option></select></td><td class="p-2"><select class="timetable-select" data-day="ê¸ˆ" data-period="2"><option value="">ì„ íƒ</option><option value="ì„ íƒí˜• ëŒë´„">ì„ íƒí˜• ëŒë´„</option><option value="ë§ì¶¤í˜•">ë§ì¶¤í˜•</option><option value="ì„ íƒí˜• êµìœ¡">ì„ íƒí˜• êµìœ¡(ì˜ˆì •)</option></select></td></tr><tr><td class="p-2 font-semibold text-gray-600">3êµì‹œ</td><td class="p-2"><select class="timetable-select" data-day="ì›”" data-period="3"><option value="">ì„ íƒ</option><option value="ì„ íƒí˜• ëŒë´„">ì„ íƒí˜• ëŒë´„</option><option value="ë§ì¶¤í˜•">ë§ì¶¤í˜•</option><option value="ì„ íƒí˜• êµìœ¡">ì„ íƒí˜• êµìœ¡(ì˜ˆì •)</option></select></td><td class="p-2"><select class="timetable-select" data-day="í™”" data-period="3"><option value="">ì„ íƒ</option><option value="ì„ íƒí˜• ëŒë´„">ì„ íƒí˜• ëŒë´„</option><option value="ë§ì¶¤í˜•">ë§ì¶¤í˜•</option><option value="ì„ íƒí˜• êµìœ¡">ì„ íƒí˜• êµìœ¡(ì˜ˆì •)</option></select></td><td class="p-2"><select class="timetable-select" data-day="ìˆ˜" data-period="3"><option value="">ì„ íƒ</option><option value="ì„ íƒí˜• ëŒë´„">ì„ íƒí˜• ëŒë´„</option><option value="ë§ì¶¤í˜•">ë§ì¶¤í˜•</option><option value="ì„ íƒí˜• êµìœ¡">ì„ íƒí˜• êµìœ¡(ì˜ˆì •)</option></select></td><td class="p-2"><select class="timetable-select" data-day="ëª©" data-period="3"><option value="">ì„ íƒ</option><option value="ì„ íƒí˜• ëŒë´„">ì„ íƒí˜• ëŒë´„</option><option value="ë§ì¶¤í˜•">ë§ì¶¤í˜•</option><option value="ì„ íƒí˜• êµìœ¡">ì„ íƒí˜• êµìœ¡(ì˜ˆì •)</option></select></td><td class="p-2"><select class="timetable-select" data-day="ê¸ˆ" data-period="3"><option value="">ì„ íƒ</option><option value="ì„ íƒí˜• ëŒë´„">ì„ íƒí˜• ëŒë´„</option><option value="ë§ì¶¤í˜•">ë§ì¶¤í˜•</option><option value="ì„ íƒí˜• êµìœ¡">ì„ íƒí˜• êµìœ¡(ì˜ˆì •)</option></select></td></tr></tbody></table></div><div id="timetableHint" class="hidden message-box text-sm"><p class="font-semibold text-green-600">âœ¨ í›Œë¥­í•©ë‹ˆë‹¤!</p><p class="text-gray-600 mt-1">ëŒë´„ê³¼ ë°°ì›€, ê·¸ë¦¬ê³  ìƒˆë¡œìš´ ê²½í—˜... ì•„ì´ì—ê²Œ í•„ìš”í•œ ëª¨ë“  ê²ƒì„ ìƒê°í•˜ì…¨êµ°ìš”!</p></div></section><section id="stage5" class="stage hidden stage-locked space-y-6 p-6 rounded-2xl bg-gradient-to-br from-red-50 to-pink-50 shadow-lg"><h2 id="stage5Title" class="text-2xl font-bold mb-3" style="color: var(--primary-text);">ì œ 5ì¥: ë™í–‰ì˜ ì•½ì†</h2><div id="stage5Message" class="message-box text-sm text-gray-600 mb-4">"ì•„ì´ë¥¼ í‚¤ìš°ëŠ” ë°ëŠ” ì˜¨ ë§ˆì„ì´ í•„ìš”í•©ë‹ˆë‹¤.<br>í•˜ì§€ë§Œ ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€ ë¶€ëª¨ë‹˜ ìì‹ ì…ë‹ˆë‹¤."</div><div class="bg-amber-100 p-4 rounded-xl text-center mb-4"><p class="text-sm font-semibold" style="color: var(--secondary-text);">"ì•„ì´ì˜ ê°€ì¥ ë“ ë“ í•œ ì²« ë²ˆì§¸ ë™í–‰ìëŠ”<br>ë°”ë¡œ <span style="color: var(--highlight-color);">ë‹¹ì‹ </span>ì…ë‹ˆë‹¤."</p></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="bg-white p-6 rounded-xl shadow-sm"><label class="block text-sm font-semibold text-gray-700 mb-2">ğŸ‘¤ ì²« ë²ˆì§¸ ë™í–‰ì</label><input type="text" id="companion1" class="input-field" placeholder="ì²« ë²ˆì§¸ ë™í–‰ìì˜ ì´ë¦„"><p class="text-xs text-gray-500 mt-2">ì•ì„œ ì…ë ¥í•˜ì‹  ìˆ˜í˜¸ìì˜ ì´ë¦„ì„ ê¸°ì–µí•˜ì‹œë‚˜ìš”?</p></div><div class="bg-white p-6 rounded-xl shadow-sm"><label class="block text-sm font-semibold text-gray-700 mb-2">ğŸ‘¤ ë‘ ë²ˆì§¸ ë™í–‰ì</label><input type="text" id="companion2" class="input-field" placeholder="ë‘ ë²ˆì§¸ ë™í–‰ìì˜ ì´ë¦„ (ì„ íƒ)"><p class="text-xs text-gray-500 mt-2">í•¨ê»˜ ì•„ì´ë¥¼ ëŒë³¼ ì†Œì¤‘í•œ ë¶„</p></div></div></section><div id="submitContainer" class="hidden pt-6 text-center"><button type="submit" id="submitBtn" class="game-button text-xl px-12 py-5 heartbeat">ğŸŒ¸ ì…í•™ ì‹ ì²­ì„œ ì œì¶œí•˜ê¸°</button></div></form></div></div>
  <div id="normalEndingModal" class="hidden fixed inset-0 z-50 modal-overlay flex items-center justify-center p-4"><div class="bg-white rounded-3xl shadow-2xl max-w-2xl w-full p-8 md:p-12 fade-in"><div class="text-7xl text-center mb-6 animate-bounce">ğŸ‰</div><h2 class="text-4xl font-bold text-center mb-4" style="color: var(--primary-text);">ì…í•™ì„ ì¶•í•˜í•©ë‹ˆë‹¤!</h2><div class="text-center text-lg text-gray-700 mb-6"><span id="endingStudentName" class="font-bold" style="color: var(--highlight-color);"></span> í•™ìƒì˜<br>ëŠ˜ë´„í•™êµ ì…í•™ì´ í—ˆê°€ë˜ì—ˆìŠµë‹ˆë‹¤.</div><div class="bg-gradient-to-br from-pink-50 to-purple-50 p-6 rounded-2xl mb-6"><h3 class="font-bold text-center mb-4 text-gray-800">ì™„ì„±ëœ ì‹œê°„í‘œ</h3><div id="endingTimetable" class="text-sm"></div></div><div class="message-box text-center"><p class="text-gray-700 leading-relaxed">ë¶€ëª¨ë‹˜ì˜ ì„¸ì‹¬í•œ ê´€ì‹¬ê³¼ ì‚¬ë‘ìœ¼ë¡œ<br>ì•„ì´ì˜ ì—¬ì •ì´ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.<br><br>ì•„ì´ì—ê²Œ ê°€ì¥ í° ë´„ì€<br>ì–¸ì œë‚˜ ë¶€ëª¨ë‹˜, ë‹¹ì‹ ì…ë‹ˆë‹¤. ğŸ’–</p></div><div class="text-center mt-8 space-y-4"><button id="showTrueEndingBtn" class="hidden game-button bg-yellow-500">ğŸ’ ìˆ¨ê²¨ì§„ ì´ì•¼ê¸° ì—´ê¸°</button><button onclick="location.reload()" class="game-button">ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°</button></div></div></div>
  <div id="trueEndingModal" class="hidden fixed inset-0 z-50 modal-overlay flex items-center justify-center p-4"><div class="bg-white rounded-3xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col fade-in"><div id="storyHeader" class="p-8 text-center text-white" style="background: linear-gradient(135deg, #ec4899, #f59e0b);"><h2 id="storyTitle" class="text-3xl font-bold mb-2"></h2><p id="storySubtitle" class="text-lg opacity-90"></p></div><div id="storyContent" class="flex-1 overflow-y-auto p-8"></div><div class="border-t bg-gray-50 p-6 flex justify-between items-center"><button id="prevChapterBtn" class="px-6 py-3 rounded-xl border-2 border-gray-300 font-semibold text-gray-700 hover:border-pink-500 transition disabled:opacity-30 disabled:cursor-not-allowed">â† ì´ì „</button><div id="chapterIndicator" class="text-sm font-semibold text-gray-600"></div><button id="nextChapterBtn" class="px-6 py-3 rounded-xl font-semibold text-white transition" style="background: var(--highlight-color);">ë‹¤ìŒ â†’</button></div></div></div>

  <script>
    const gameState = { currentStage: 1, growth: 0, sNameEntered: false, trueEndingUnlocked: false, studentName: '', parentName: '', timetableRiddle: { mon: false, wed: false, fri: false }, dataCollected: { birthDate: '', parentContact: '', studentType: '', timetable: {}, companions: [] } };
    const sounds = {
        unlock: new Audio('https://cdn.pixabay.com/download/audio/2021/08/04/audio_dea41b359c.mp3?filename=magic-wand-1-101wand.wav'),
        success: new Audio('https://cdn.pixabay.com/download/audio/2022/01/21/audio_ea3b022213.mp3?filename=success-1-6297.mp3'),
        sparkle: new Audio('https://cdn.pixabay.com/download/audio/2022/03/10/audio_c29d3bce2e.mp3?filename=fantasy-magical-sparkle-swoosh-1-101sparkle.wav'),
        background: document.getElementById('bgMusic')
    };
    Object.values(sounds).forEach(s => s.volume = 0.4);
    sounds.background.volume = 0.2;

    function playSound(name) { try { sounds[name].currentTime = 0; sounds[name].play(); } catch(e) {} }

    function createSparkles(element) {
        const rect = element.getBoundingClientRect(); const centerX = rect.left + rect.width / 2; const centerY = rect.top + rect.height / 2;
        for (let i = 0; i < 30; i++) {
            setTimeout(() => {
                const s = document.createElement('div'); s.className = 'sparkle';
                const a = (Math.PI * 2 * i) / 30, d = 50 + Math.random() * 50;
                const tx = Math.cos(a) * d, ty = Math.sin(a) * d;
                s.style.left = centerX + 'px'; s.style.top = centerY + 'px';
                s.style.setProperty('--tx', tx + 'px'); s.style.setProperty('--ty', ty + 'px');
                document.body.appendChild(s); setTimeout(() => s.remove(), 1000);
            }, i * 20);
        }
        playSound('sparkle');
    }
    
    function createCherryBlossoms() {
        setInterval(() => {
            const b = document.createElement('div'); b.className = 'cherry-blossom'; b.textContent = 'ğŸŒ¸';
            b.style.left = Math.random() * 100 + 'vw'; b.style.animationDuration = (Math.random() * 3 + 4) + 's';
            b.style.fontSize = (Math.random() * 10 + 15) + 'px'; document.body.appendChild(b);
            setTimeout(() => b.remove(), 7000);
        }, 800);
    }

    function updateGrowth(percentage) {
        gameState.growth = percentage; const bar = document.getElementById('growthBar'), emoji = document.getElementById('growthEmoji');
        bar.style.width = percentage + '%';
        if (percentage >= 100) emoji.textContent = 'ğŸŒ¸'; else if (percentage >= 80) emoji.textContent = 'ğŸŒº';
        else if (percentage >= 60) emoji.textContent = 'ğŸŒ»'; else if (percentage >= 40) emoji.textContent = 'ğŸŒ¿';
        else if (percentage >= 20) emoji.textContent = 'ğŸŒ±';
    }

    function showStage(stageNumber) {
        if(gameState.currentStage >= stageNumber) return;
        const stage = document.getElementById('stage' + stageNumber); if (!stage) return;
        stage.classList.remove('hidden', 'stage-locked'); stage.classList.add('visible');
        setTimeout(() => stage.scrollIntoView({ behavior: 'smooth', block: 'center' }), 300);
        playSound('unlock'); gameState.currentStage = stageNumber;
    }

    function initStage1() {
        const lock = document.getElementById('privacyLock'), notice = document.getElementById('privacyNotice'), checkbox = document.getElementById('privacyAgree');
        let isUnlocked = false;
        lock.addEventListener('click', () => { if (!isUnlocked) { notice.classList.remove('scrambled'); lock.textContent = 'ğŸ”“'; isUnlocked = true; playSound('unlock'); createSparkles(lock); } });
        checkbox.addEventListener('change', e => {
            if (e.target.checked && isUnlocked) { playSound('success'); updateGrowth(20); setTimeout(() => showStage(2), 500); }
            else if (e.target.checked && !isUnlocked) { e.target.checked = false; alert('ë¨¼ì € ìë¬¼ì‡ ë¥¼ í´ë¦­í•˜ì—¬ ì•½ì†ì˜ ë‚´ìš©ì„ í™•ì¸í•´ì£¼ì„¸ìš”! ğŸ”’'); }
        });
    }

    function initStage2() {
        document.querySelectorAll('[data-path]').forEach(btn => btn.addEventListener('click', () => {
            document.querySelectorAll('[data-path]').forEach(b => b.classList.remove('selected')); btn.classList.add('selected');
            gameState.dataCollected.studentType = btn.dataset.path;
            playSound('success'); updateGrowth(40); setTimeout(() => showStage(3), 500);
        }));
    }

    function initStage3() {
        const sName = document.getElementById('studentName'), bDate = document.getElementById('birthDate'), pName = document.getElementById('parentName'), pContact = document.getElementById('parentContact');
        const check = () => { if (gameState.studentName && bDate.value && gameState.parentName && pContact.value.includes('1004')) { gameState.dataCollected.birthDate = bDate.value; gameState.dataCollected.parentContact = pContact.value; playSound('success'); createSparkles(pContact); updateGrowth(60); setTimeout(() => showStage(4), 800); } };
        sName.addEventListener('input', () => { gameState.studentName = sName.value.trim(); if (gameState.studentName === 'ê¹€ì •ì„¤') gameState.sNameEntered = true; else gameState.sNameEntered = false; check(); });
        pName.addEventListener('input', () => { gameState.parentName = pName.value.trim(); check(); });
        bDate.addEventListener('change', check);
        pContact.addEventListener('input', e => { let v = e.target.value.replace(/[^\d]/g, ''); e.target.value = v.length > 7 ? `${v.slice(0, 3)}-${v.slice(3, 7)}-${v.slice(7, 11)}` : (v.length > 3 ? `${v.slice(0, 3)}-${v.slice(3)}` : v); check(); });
    }

    function initStage4() {
        document.querySelectorAll('.timetable-select').forEach(sel => sel.addEventListener('change', e => {
            const day = e.target.dataset.day, val = e.target.value;
            if (day === 'ì›”' && val.includes('ëŒë´„')) { gameState.timetableRiddle.mon = true; e.target.classList.add('correct'); }
            if (day === 'ìˆ˜' && val.includes('ë§ì¶¤í˜•')) { gameState.timetableRiddle.wed = true; e.target.classList.add('correct'); }
            if (day === 'ê¸ˆ' && val.includes('êµìœ¡')) { gameState.timetableRiddle.fri = true; e.target.classList.add('correct'); }
            if (!gameState.dataCollected.timetable[day]) gameState.dataCollected.timetable[day] = {};
            gameState.dataCollected.timetable[day][e.target.dataset.period] = val;
            const { mon, wed, fri } = gameState.timetableRiddle;
            if (mon && wed && fri) { document.getElementById('timetableHint').classList.remove('hidden'); playSound('success'); updateGrowth(80); setTimeout(() => showStage(5), 1000); }
        }));
    }

    function initStage5() {
        document.getElementById('companion1').addEventListener('input', e => {
            const name = e.target.value.trim();
            if (gameState.sNameEntered && name === 'ì†ì§€í›ˆ') {
                if (!gameState.trueEndingUnlocked) activateTrueEndingMode();
            } else if (name === gameState.parentName) {
                unlockSubmit(false);
            }
        });
    }

    function activateTrueEndingMode() {
        gameState.trueEndingUnlocked = true; document.body.classList.add('true-ending-active');
        createCherryBlossoms(); playSound('sparkle');
        document.getElementById('stage5Title').innerHTML = 'ì œ 5ì¥: Hì˜ ì•½ì† ğŸ’';
        document.getElementById('stage5Message').innerHTML = `<p class="text-sm text-gray-700 leading-relaxed">...ì°¾ìœ¼ì…¨êµ°ìš”.<br><br><span class="font-bold" style="color: var(--highlight-color);">Sì˜ ì´ì•¼ê¸°</span> ê³ì—ëŠ”<br>ì–¸ì œë‚˜ <span class="font-bold" style="color: var(--highlight-color);">Hê°€</span> ìˆë‹¤ëŠ” ê²ƒì„.<br><br>ì´ ì—¬ì •ì€ Hê°€ Së¥¼ ìœ„í•´ ë§Œë“ <br>'ì‚¬ê³„ì ˆì˜ ë¹„ë°€' ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤.</p>`;
        unlockSubmit(true);
    }
    
    function unlockSubmit(isTrueEnding) {
        updateGrowth(100); playSound('success');
        const submitContainer = document.getElementById('submitContainer'), submitBtn = document.getElementById('submitBtn');
        submitContainer.classList.remove('hidden');
        if (isTrueEnding) submitBtn.textContent = 'ğŸ’– ì§„ì§œ ì´ì•¼ê¸° ì—´ê¸°';
        setTimeout(() => submitBtn.scrollIntoView({ behavior: 'smooth', block: 'center' }), 300);
    }

    function handleFormSubmit(e) { e.preventDefault(); showNormalEnding(); }

    function showNormalEnding() {
        sounds.background.pause(); playSound('success');
        document.getElementById('endingStudentName').textContent = gameState.studentName;
        const ttClone = document.getElementById('timetable').cloneNode(true);
        document.getElementById('endingTimetable').innerHTML = ''; document.getElementById('endingTimetable').appendChild(ttClone);
        if (gameState.trueEndingUnlocked) { document.getElementById('showTrueEndingBtn').classList.remove('hidden'); }
        document.getElementById('mainForm').classList.add('hidden'); document.getElementById('normalEndingModal').classList.remove('hidden');
    }
    
    function showTrueEnding() {
        const story = {
          chapters: [
            { emoji: 'ğŸ’Œ', title: 'í”„ë¡¤ë¡œê·¸', subtitle: 'ì´ ì‘ì€ ë¹„ë°€ì„ ì°¾ì•„ì£¼ì…”ì„œ', color: 'linear-gradient(135deg, #fce7f3, #fbcfe8)', content: `<div class="text-center space-y-6"><div class="text-6xl mb-4">ğŸ’ŒğŸ“œâœ¨</div><div class="text-lg text-gray-800 leading-relaxed space-y-4"><p class="font-semibold text-2xl" style="color: var(--highlight-color);">ì´ ì‘ì€ ì—¬ì •ì„ ì°¾ì•„ì£¼ì…”ì„œ ê³ ë§™ìŠµë‹ˆë‹¤.</p><p>ë‹¹ì‹ ì´ ë°©ê¸ˆ ëë§ˆì¹œ ì´ ì…í•™ ì‹ ì²­ì„œëŠ”,<br><span class="font-bold">Hê°€ Së¥¼ ìœ„í•´ ë§Œë“ </span><br>ìˆ˜ë§ì€ 'ì‚¬ê³„ì ˆì˜ ë¹„ë°€' ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤.</p><p>Sê°€ ëŠ˜ ë´„ì²˜ëŸ¼ ë”°ëœ»í•œ ì„¸ìƒì—ì„œ<br>í–‰ë³µí•˜ê¸°ë¥¼ ë°”ë¼ëŠ” ë§ˆìŒìœ¼ë¡œ,<br>HëŠ” ì½”ë“œë¥¼ í†µí•´ ì‘ì€ ì„¸ìƒì„ ë§Œë“¤ê³ ,<br>ê·¸ ì•ˆì— ë‘˜ë§Œì˜ ì´ì•¼ê¸°ë¥¼ ìˆ¨ê²¨ë‘ì—ˆìŠµë‹ˆë‹¤.</p><p class="text-xl font-semibold" style="color: var(--secondary-text);">ì´ì œ, ê·¸ ì´ì•¼ê¸°ì˜ ì§„ì§œ ì‹œì‘ì„<br>ë“¤ë ¤ë“œë¦´ê²Œìš”. ğŸŒ¸</p></div></div>`},
            { emoji: 'ğŸŒ¸', title: 'ë´„: ì•½ì†', subtitle: 'Hê°€ Sì—ê²Œ ë§ˆìŒë¨¹ì€ ìˆœê°„', color: 'linear-gradient(135deg, #fce7f3, #fef3c7)', content: `<div class="space-y-6"><div class="text-6xl text-center mb-4">ğŸŒ¸ğŸ¤âœ¨</div><div class="text-lg text-gray-800 leading-relaxed space-y-4"><p>ì–´ëŠ ë”°ìŠ¤í•œ ë´„ë‚ , <span class="font-bold text-pink-600">S</span>ëŠ” Hì—ê²Œ ì¡°ìš©íˆ ë§í–ˆìŠµë‹ˆë‹¤.</p><div class="bg-pink-50 p-4 rounded-xl border-l-4 border-pink-400 italic"><p>"ê°€ë”ì€ ì„¸ìƒì´ ë„ˆë¬´ ë³µì¡í•˜ê²Œ ëŠê»´ì ¸. ì–´ë¦° ì‹œì ˆì²˜ëŸ¼ ëª¨ë“  ê²Œ ë‹¨ìˆœí•˜ê³  ì•„ë¦„ë‹¤ì› ìœ¼ë©´ ì¢‹ê² ì–´."</p></div><p><span class="font-bold text-orange-600">H</span>ëŠ” ê·¸ ë§ì„ ë§ˆìŒì— ë‹´ì•˜ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ê·¸ë‚  ë°¤, HëŠ” ìì‹ ë§Œì˜ ì•½ì†ì„ í–ˆìŠµë‹ˆë‹¤.</p><div class="bg-orange-50 p-6 rounded-xl border-l-4 border-orange-400 font-semibold text-orange-700"><p>"Së¥¼ ìœ„í•´, Së§Œì„ ìœ„í•œ ì‘ì€ ì„¸ìƒì„ ë§Œë“¤ì–´ì£¼ì. ì½”ë“œë¡œ ì—®ì€ ìš°ë¦¬ë§Œì˜ ë™í™”ì±…ì„. ê·¸ê³³ì—ì„œëŠ” ëª¨ë“  ê²ƒì´ ë”°ëœ»í•˜ê³ , ëª¨ë“  ìˆœê°„ì´ ë´„ë‚  ê°™ì„ ê±°ì•¼."</p></div><p class="text-center text-2xl mt-4">ê·¸ë ‡ê²Œ Hì˜ ë¹„ë°€ í”„ë¡œì íŠ¸ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.</p></div></div>` },
            { emoji: 'â˜€ï¸', title: 'ì—¬ë¦„: ì°½ì¡°', subtitle: 'ê¸°ì–µì„ ì½”ë“œë¡œ ì—®ì–´ë‚´ë‹¤', color: 'linear-gradient(135deg, #fef3c7, #fed7aa)', content: `<div class="space-y-6"><div class="text-6xl text-center mb-4">â˜€ï¸âŒ¨ï¸ğŸ’–</div><div class="text-lg text-gray-800 leading-relaxed space-y-4"><p>ëœ¨ê±°ìš´ ì—¬ë¦„ ë°¤, <span class="font-bold text-orange-600">H</span>ì˜ ë°©ì—ëŠ” í‚¤ë³´ë“œ ì†Œë¦¬ë§Œì´ ê°€ë“í–ˆìŠµë‹ˆë‹¤. ê·¸ê²ƒì€ ë‹¨ìˆœí•œ ì½”ë”©ì´ ì•„ë‹ˆì—ˆìŠµë‹ˆë‹¤.</p><div class="bg-yellow-50 p-6 rounded-xl border-2 border-yellow-300"><p class="font-bold text-xl text-yellow-700 mb-2">HëŠ” ê¸°ì–µì„ ì—®ê³  ìˆì—ˆìŠµë‹ˆë‹¤.</p><ul class="list-disc list-inside text-yellow-800 space-y-2"><li>í•¨ê»˜ ì›ƒì—ˆë˜ ìˆœê°„ì€ <span class="font-mono bg-yellow-200 px-1 rounded">function laugh()</span></li><li>Sê°€ ì¢‹ì•„í•˜ë˜ ë²šê½ƒì€ <span class="font-mono bg-yellow-200 px-1 rounded">createCherryBlossoms()</span></li><li>ì„œë¡œë¥¼ í–¥í•œ ë¯¿ìŒì€ <span class="font-mono bg-yellow-200 px-1 rounded">Promise</span></li></ul></div><p>HëŠ” Sì™€ì˜ ì¶”ì–µì„ í•œ ì¤„ í•œ ì¤„ ì½”ë“œë¡œ ë²ˆì—­í•˜ë©°, ë‘˜ë§Œì˜ ë””ì§€í„¸ ì •ì›ì„ ê°€ê¾¸ì—ˆìŠµë‹ˆë‹¤. ì´ ê²Œì„ì˜ ëª¨ë“  í¼ì¦ì€ Së¼ë©´ ë¶„ëª…íˆ ì•Œì•„ì±Œ ìˆ˜ ìˆì„, ë‘˜ë§Œì˜ ì†Œì¤‘í•œ ì•”í˜¸ì˜€ìŠµë‹ˆë‹¤.</p></div></div>` },
            { emoji: 'ğŸ‚', title: 'ê°€ì„: ë¹„ë°€', subtitle: 'ì •ì›ì— ìˆ¨ê²¨ë‘” ì—´ì‡ ', color: 'linear-gradient(135deg, #fed7aa, #fecaca)', content: `<div class="space-y-6"><div class="text-6xl text-center mb-4">ğŸ‚ğŸ”‘ğŸ’</div><div class="text-lg text-gray-800 leading-relaxed space-y-4"><p>ê²°ì‹¤ì˜ ê³„ì ˆ, ê°€ì„. Hì˜ ì‘ì€ ì„¸ìƒì´ ê±°ì˜ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ ë§ˆì§€ë§‰ìœ¼ë¡œ, ê°€ì¥ ì¤‘ìš”í•œ ë¹„ë°€ì„ ì‹¬ì„ ì°¨ë¡€ì˜€ìŠµë‹ˆë‹¤.</p><div class="bg-orange-100 p-6 rounded-xl border-2 border-orange-400 text-center"><p class="font-bold text-2xl text-orange-700 mb-4">ë°”ë¡œ ë‘ ì‚¬ëŒì˜ ì´ë¦„.</p><p class="text-orange-800">ì´ ì •ì›ì˜ ì£¼ì¸ì´ <span class="font-bold">S</span>ë¼ëŠ” ê²ƒ.<br>ê·¸ë¦¬ê³  ì´ ì •ì›ì„ ë§Œë“  ì‚¬ëŒì´ <span class="font-bold">H</span>ë¼ëŠ” ê²ƒ.</p></div><p>HëŠ” ìƒê°í–ˆìŠµë‹ˆë‹¤.</p><div class="bg-pink-50 p-4 rounded-xl italic border-l-4 border-pink-400"><p>"ì´ë¦„ì€ ê°€ì¥ ê°•ë ¥í•œ ë§ˆë²•ì´ì•¼. ì´ ë§ˆë²•ì˜ ì—´ì‡ ë¥¼ Sê°€, í˜¹ì€ ìš°ë¦¬ì˜ ì´ì•¼ê¸°ë¥¼ ì•Œì•„ë´ ì¤„ ëˆ„êµ°ê°€ê°€ ì°¾ì•„ì£¼ê¸°ë¥¼."</p></div><p>HëŠ” 'ì•„ì´ì˜ ì´ë¦„'ê³¼ 'ì²« ë²ˆì§¸ ë™í–‰ì'ë¼ëŠ”, ê°€ì¥ ì¤‘ìš”í•˜ê³  ì˜ë¯¸ ìˆëŠ” ìë¦¬ì— ë‘ ì‚¬ëŒì˜ ì´ë¦„ì„ ì—´ì‡ ë¡œ ìˆ¨ê²¨ë‘ì—ˆìŠµë‹ˆë‹¤.</p></div></div>` },
            { emoji: 'â„ï¸', title: 'ê²¨ìš¸: ê¸°ë‹¤ë¦¼', subtitle: 'ì™„ì„±ëœ ì„¸ìƒ, ê·¸ë¦¬ê³  ì‘ì€ ì†Œë§', color: 'linear-gradient(135deg, #ddd6fe, #e0e7ff)', content: `<div class="space-y-6"><div class="text-6xl text-center mb-4">â„ï¸ğŸğŸ’Œ</div><div class="text-lg text-gray-800 leading-relaxed space-y-4"><p>ì°¨ê°€ìš´ ê²¨ìš¸, ë§ˆì¹¨ë‚´ Hì˜ ì‘ì€ ì„¸ìƒì´ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ë§ˆì¹˜ í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì„ ë¬¼ì²˜ëŸ¼, ê·¸ ì•ˆì—ëŠ” ë”°ëœ»í•œ ì‚¬ê³„ì ˆì´ ëª¨ë‘ ë‹´ê²¨ ìˆì—ˆìŠµë‹ˆë‹¤.</p><p>HëŠ” ì™„ì„±ëœ ê²Œì„ì„ ë°”ë¼ë³´ë©° ì¡°ìš©íˆ ì†Œë§í–ˆìŠµë‹ˆë‹¤.</p><div class="bg-blue-50 p-6 rounded-xl border-l-4 border-blue-400 italic text-blue-800"><p>"S, ë„¤ê°€ ì´ ì‘ì€ ì—¬ì •ì„ ì—¬í–‰í•  ë•Œ, ì ì‹œë‚˜ë§ˆ ì„¸ìƒì˜ ë³µì¡í•¨ì„ ìŠê³  ì›ƒì„ ìˆ˜ ìˆê¸°ë¥¼.</p><p class="mt-2">ê·¸ë¦¬ê³  í˜¹ì‹œ ë¹„ë°€ì˜ ì—´ì‡ ë¥¼ ë°œê²¬í•œë‹¤ë©´, ë‚´ê°€ ë„ˆë¥¼ ì–¼ë§ˆë‚˜ ì†Œì¤‘í•˜ê²Œ ìƒê°í•˜ëŠ”ì§€, ê·¸ ë§ˆìŒì´ ì „í•´ì§€ê¸°ë¥¼."</p></div><p>ì´ ê²Œì„ì€ Së¥¼ í–¥í•œ Hì˜ ê³ ë°±ì´ì, ì„¸ìƒì— ë‹¨ í•˜ë‚˜ë¿ì¸ ì„ ë¬¼ì´ì—ˆìŠµë‹ˆë‹¤.</p></div></div>` },
            { emoji: 'ğŸŒˆ', title: 'ë‹¤ì‹œ, ë´„: ë°œê²¬', subtitle: 'ë‹¹ì‹ ì´ ì°¾ì•„ë‚¸ ì´ì•¼ê¸°', color: 'linear-gradient(135deg, #fce7f3, #fef3c7, #ddd6fe)', content: `<div class="space-y-6"><div class="text-6xl text-center mb-4">ğŸŒˆğŸŒ¸ğŸ’–</div><div class="text-lg text-gray-800 leading-relaxed space-y-4"><p class="font-bold text-2xl text-center" style="color: var(--primary-text);">ê·¸ë¦¬ê³  ë§ˆì¹¨ë‚´, ë‹¹ì‹ ì´ ì´ ë¹„ë°€ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤.</p><p>ë‹¹ì‹ ì´ í’€ì–´ë‚¸ í¼ì¦ë“¤ì€ ë‹¨ìˆœí•œ ê²Œì„ì´ ì•„ë‹ˆì—ˆìŠµë‹ˆë‹¤. ê·¸ê²ƒì€ ëˆ„êµ°ê°€ê°€ ë‹¤ë¥¸ ëˆ„êµ°ê°€ë¥¼ ìœ„í•´ ì •ì„±ê» ìŒ“ì•„ ì˜¬ë¦° ë§ˆìŒì˜ ì¡°ê°ë“¤ì´ì—ˆìŠµë‹ˆë‹¤.</p><div class="bg-gradient-to-r from-pink-100 via-purple-100 to-yellow-100 p-6 rounded-xl"><p class="text-center text-gray-700">ì´ ì‘ì€ ì„¸ìƒ ì†ì—ì„œ Sì™€ Hì˜ ì´ì•¼ê¸°ëŠ” ì˜ì›íˆ ë´„ë‚ ì²˜ëŸ¼ ë”°ëœ»í•  ê²ƒì…ë‹ˆë‹¤.</p></div><div class="mt-8 p-6 bg-white rounded-xl shadow-lg border-2" style="border-color: var(--highlight-color);"><p class="text-center font-semibold" style="color: var(--primary-text);">ì´ ì•„ë¦„ë‹¤ìš´ ìš°ì •ì„ ë°œê²¬í•˜ê³ <br>ê·¸ë“¤ì˜ ì´ì•¼ê¸°ì— ê·€ ê¸°ìš¸ì—¬ì£¼ì…”ì„œ<br>ì§„ì‹¬ìœ¼ë¡œ ê°ì‚¬í•©ë‹ˆë‹¤.</p><p class="text-center text-2xl mt-3">ëŠ˜ë´„í†¡í†¡ ì œì‘íŒ€ H.</p></div></div></div>` }
          ]
        };
        let currentChapter = 0;
        const modal = document.getElementById('trueEndingModal');
        const header = document.getElementById('storyHeader'), title = document.getElementById('storyTitle'), subtitle = document.getElementById('storySubtitle'), content = document.getElementById('storyContent'), indicator = document.getElementById('chapterIndicator'), prevBtn = document.getElementById('prevChapterBtn'), nextBtn = document.getElementById('nextChapterBtn');
        function renderChapter() {
            const chapter = story.chapters[currentChapter];
            header.style.background = chapter.color; title.textContent = `${chapter.emoji} ${chapter.title}`; subtitle.textContent = chapter.subtitle; content.innerHTML = chapter.content;
            indicator.textContent = `${currentChapter + 1} / ${story.chapters.length}`; prevBtn.disabled = currentChapter === 0;
            nextBtn.textContent = (currentChapter === story.chapters.length - 1) ? 'ì´ì•¼ê¸° ë‹«ê¸° ğŸ’' : 'ë‹¤ìŒ â†’';
            content.scrollTop = 0;
        }
        prevBtn.onclick = () => { if (currentChapter > 0) { currentChapter--; renderChapter(); playSound('success'); } };
        nextBtn.onclick = () => { if (currentChapter < story.chapters.length - 1) { currentChapter++; renderChapter(); playSound('success'); } else { modal.classList.add('hidden'); location.reload(); } };
        renderChapter(); document.getElementById('normalEndingModal').classList.add('hidden'); modal.classList.remove('hidden');
    }

    document.addEventListener('DOMContentLoaded', () => {
        document.getElementById('startJourneyBtn').addEventListener('click', () => {
            playSound('unlock'); sounds.background.play();
            document.getElementById('prologueScreen').classList.add('hidden');
            document.getElementById('mainForm').classList.remove('hidden');
        });
        initStage1(); initStage2(); initStage3(); initStage4(); initStage5();
        document.getElementById('applicationForm').addEventListener('submit', handleFormSubmit);
        document.getElementById('showTrueEndingBtn').addEventListener('click', showTrueEnding);
    });
  </script>
</body>
</html>
